
<!DOCTYPE HTML>
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xmlns:wb="http://open.weibo.com/wb">
<head>
  <title>korn Shell Notes(III) | Bo's Blog</title>
  
  <meta name="author" content="Bo Yang" />
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <!--
  <link href="http://libs.baidu.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
  -->

  <!-- Bootstrap -->
  <link href="/assets/themes/clear/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- font-awesome -->
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">

  <!-- Google Prettify -->
  <link href="/assets/themes/clear/google-code-prettify/desert.css" rel="stylesheet" type="text/css" media="all">
  <!-- Google Pretty end -->

  <link href="/assets/themes/clear/css/style.css" rel="stylesheet" type="text/css" media="all" />
  
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>

  <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <a class="brand" href="/">bo-yang</a>
        <ul class="nav">
          <li><a href="/archive.html">Archive</a></li>
          <li><a href="/about.html">About</a></li>
          <li><a href="/messages.html">Messages</a></li>
        </ul>
        <ul class="pull-right">
          <li>
            <form class="navbar-search" method="get" action="http://www.google.com/search" target="google_window">
              <input id="g_search" type="text" class="search-query" placeholder="Search..." name="q" />
              <input type="submit" name="btnG" style="display:none" id="searchsubmit" value="Search" />
              <input type="hidden" name="ie" value="UTF-8" />
              <input type="hidden" name="oe" value="UTF-8" />
              <input type="hidden" name="hl" value="en-US" />
              <input type="hidden" name="domains" value="http://bo-yang.github.io/" />
              <input type="hidden" name="sitesearch" value="http://bo-yang.github.io/" />
            </form>
          </li>
        </ul>
        <ul class="nav pull-right">
          <li><a href="/atom.xml">RSS</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container page-container">
    <div class="content">
      
<div class="page-header">
	<h1>korn Shell Notes(III)</h1>
</div>

<div class="row-fluid page-body">
  <div class="span11 left">
    <div class="main-container shadow">
	  <div class="mainbody thepost">
        <p>
     <span class="Apple-style-span" style="color:rgb(0,0,0);font-family:Verdana;font-size:13px;"><span class="Apple-style-span" style="font-size:19px;font-style:italic;font-weight:bold;">6 Variables</span>
<div id="xcw:" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;">
<div style="text-align:left;margin-top:0;margin-bottom:0;">The Korn shell supports four data types: string, integer, float, and array. If a data type is not explicitly defined, the Korn shell will assume that the variable is a string.</p>
<p>The typeset command can also be used to assign values.</p>
<p>If a value is not given, the variable is set to null. Here, X is reassigned the null value:<br />    <b>$ X=</b></div>
</div>
<h3 style="font-size:12pt;"><a name="6_1_Variable_Attributes_148016" id="6_1_Variable_Attributes_148016"></a>6.1 Variable Attributes</h3>
<p>Korn shell variables can have one or more attributes that specify their internal representation, access or scope, or the way they are displayed.Variables can be set to integer type for faster arithmetic operations, read-only so that the value cannot be changed, left/right justified for formatting purposes, and more. To assign a value and/or attribute to a Korn shell variable, use the following format with the typeset command:<br />    <span style="font-family:'Courier New';">typeset-attribute variable=value</span><br />or<br />    t<span style="font-family:'Courier New';">ypeset-attribute variable</span></p>
<p>Except for readonly, variable attributes can be set before, during, or after assignment. Functionally it makes no difference. Just remember that <b>the attribute has precedence over the value</b>. This means that if you change the attribute after a value has been assigned, the value may be affected.</p>
<div id="lfds" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_157c3wjn8fw_b" style="width:551px;height:233px;" /></p>
<div id="yo2l" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_159thjp23gb_b" style="width:414px;height:546px;" /></div>
<p></div>
<h3 style="font-size:12pt;"><a name="6_2_Lowercase_l_and_Uppercase_" id="6_2_Lowercase_l_and_Uppercase_"></a>6.2 Lowercase (-l) and Uppercase (-u) Attributes</h3>
<p>These attributes cause the variable values to be changed to lower or uppercase. For example, the lowercase attribute and uppercase value ASPD are assigned to variable MYSYS:<br />    <span style="font-family:'Courier New';">$ typeset —l MYSYS=ASPD</span><br />Despite the fact that MYSYS was assigned uppercase ASPD, when accessed, the value is displayed in lowercase:<br />    <span style="font-family:'Courier New';">$ print $MYSYS</span><br />    <span style="font-family:'Courier New';">aspd</p>
<p></span>This is because the attribute affects the variable value, regardless of the assignment. Variable attributes can also be changed after assignment. If we wanted to display variable MYSYS in uppercase, we could just reset the attribute:<br /><span style="font-family:'Courier New';">    $ typeset —u MYSYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $MYSYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASPD</span><br />
<h3 style="font-size:12pt;"><a name="6_3_Readonly_r_Attribute_58026" id="6_3_Readonly_r_Attribute_58026"></a>6.3 Readonly (-r) Attribute</h3>
<p>Once the readonly attribute is set, a variable cannot be assigned another value. Here, we use it to set up a restricted PATH:<br />    <span style="font-family:'Courier New';">$ typeset —r PATH=/usr/rbin</span><br />If there is an attempt to reset PATH, an error message is generated:<br /><span style="font-family:'Courier New';">    $ PATH=$PATH:/usr/bin:</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: PATH: is read only</span></p>
<p>Unlike other variable attributes, once the readonly attribute is set, it cannot be removed.<br />
<h3 style="font-size:12pt;"><a name="6_4_Integer_i_Attribute_906875" id="6_4_Integer_i_Attribute_906875"></a>6.4 Integer (-i) Attribute</h3>
<p>The integer attribute (-i) is used to explicitly declare integer variables. Although it is not necessary to set this attribute when assigning integer values, there are some benefits to it.</p>
<p>There is one restriction on integer variables. Once a variable is set to integer type, it can't be assigned a non-integer value:<br /><span style="font-family:'Courier New';">    $ typeset —i NUM=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: NUM: bad number</span><br />
<h3 style="font-size:12pt;"><a name="6_5_The_Float_E_F_Attribute_26" id="6_5_The_Float_E_F_Attribute_26"></a>6.5 The Float (-E, -F) Attribute</h3>
<p>The float attributes (-E, -F) are used to declare float variables. The -E is used to specify the number of significant digits, while -F is used to specify the precision. In the following example, X is set to a float variable and assigned a value using both formats:<br /><span style="font-family:'Courier New';">    $ typeset —E5 X=123.456</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    123.46</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ typeset —F5 X=123.456</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    123.45600</span><br />The float command can also be used to declare a float variable, but does not allow for specifying the precision.<br />
<h3 style="font-size:12pt;"><a name="6_6_Right_R_and_Left_L_Justify" id="6_6_Right_R_and_Left_L_Justify"></a>6.6 Right (-R) and Left (-L) Justify Attributes</h3>
<p>The right and left justify attributes cause variable values to be justified within their width and are be used to format data. Here, variables A and B are set to right-justify with a field width of 7 characters. Notice that integer values are used, even though the integer attribute is not set.
<div id="yn69" style="text-align:left;margin-top:0;margin-bottom:0;padding:1em 0;"></div>
<div id="yn69" style="text-align:left;margin-top:0;margin-bottom:0;padding:1em 0;">    <img src="http://docs.google.com/File?id=dd6nw3mt_158g2383sgc_b" style="width:316px;height:120px;" /><br />If the field width is not large enough for the variable assignment, the value gets truncated. Variable X is assigned a seven-character wide value, but the field width is set to 3, so the first four characters are lost:<br /><span style="font-family:'Courier New';">    $ typeset —R3 X=ABCDEFG</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    EFG</p>
<p><span style="font-family:Verdana;">If a field width is not given, then it is set with the first variable assignment. Variable Y is assigned a three-character wide value, so the field width is set to 3.</span><br />    $ typeset —L Y=ABC<br />    $ print $Y<br />    ABC<br /><span style="font-family:Verdana;">Without explicitly resetting the field width, a subsequent assignment would be restricted to a three-character wide value:</span><br />    $ Y=ZYXWVUT<br />    $ print $Y<br />    ZYX<br /></span><br />
<h3 style="font-size:12pt;"><a name="6_7_Autoexport_x_Attribute_977" id="6_7_Autoexport_x_Attribute_977"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.7 Autoexport (-x) Attribute</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">It allows you to set and export a variable in one command. Instead of<br /><span style="font-family:'Courier New';">    $ typeset X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ export X</span><br />you can do this:<br /><span style="font-family:'Courier New';">    $ typeset —x X=abc</span><br style="font-family:'Courier New';" />We could use this attribute to add the /lbin directory to the <b>PATH</b> variable and export it all in one command:<br /><span style="font-family:'Courier New';">    $ typeset —x PATH=$PATH:/lbin</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_8_Removing_Variable_Attribut" id="6_8_Removing_Variable_Attribut"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.8 Removing Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Except for readonly, variable attributes are removed with the <b>typeset +</b><i>attribute</i> command. Assuming that the integer attribute was set on the NUM variable, we could remove it like this:<br /><span style="font-family:'Courier New';">    $ typeset +i NUM</span><br />and then reassign it a non-integer value:<br /><span style="font-family:'Courier New';">    $ NUM=abc</p>
<p></span><b>Once the readonly attribute is set, it cannot be removed</b>. When we try to do this with the PATH variable that was previously set, we get an error message:<br /><span style="font-family:'Courier New';">    $ typeset +r PATH</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: PATH: is read only</span><br /><span style="color:rgb(0,0,255);">The only way to reassign a readonly variable is to unset it first, then assign a value from scratch.</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_9_Checking_Variable_Attribut" id="6_9_Checking_Variable_Attribut"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.9 Checking Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Attributes of Korn shell variables are listed using the typeset -<i><span style="font-family:Georgia;">attribute</span></i> command. For example, to list all the integer type variables and their values:<br /><span style="font-family:'Courier New';">    $ typeset —i</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ERRNO=0</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    MAILCHECK=600</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    PPID=177</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    RANDOM=22272</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    SECONDS=4558</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    TMOUT=0</p>
<p></span>To list only the names of variables with a specific attribute, use the typeset +<i>attribute</i> command.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_10_More_with_Variables_38599" id="6_10_More_with_Variables_38599"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.10 More with Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">You can do other things with variables, such as assign them the value of another variable, the output of a command, or even the contents of a file.</p>
<p>Variables can be assigned command output using this format:<br /><span style="font-family:'Courier New';">   <b> </b><b>variable=$(command)</b></span><br />or<br /><span style="font-family:'Courier New';">    <b>variable=`command`</b></span></p>
<p>The second format is provided for compatibility with the Bourne shell. Here, UCSC is set to its internet ID by assigning the output of the grep and cut commands:<br /><span style="font-family:'Courier New';">    $ UCSC=$(grep UCSC /etc/hosts | cut —f1 —d" ")</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $UCSC</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    128.114.129.1</span></p>
<p>Variables can also be assigned the contents of files like this:<br /><b><span style="font-family:'Courier New';">    variable=$(&lt;file)</span></b><br />or<br /><b><span style="font-family:'Courier New';">    variable=`cat file`</span></b><br />The first format is equivalent to variable=$(cat file). The second format is much slower, but is provided for compatibility with the Bourne shell.</p>
<p>A <b>nameref</b> variable is a synonym for another variable and will always have the same value as its associated variable They are created using the following formats:<br /><span style="font-family:'Courier New';">    <b>nameref </b><i>nameref_variable=variable</i></span><br />or<br /><span style="font-family:'Courier New';">    <b>typeset</b> <b>-n</b> <i>nameref_variable=variable</i></span><br />For example:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ nameref Y=X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="6_11_Unsetting_Variables_82193" id="6_11_Unsetting_Variables_82193"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">6.11 Unsetting Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Variable definitions are removed using the <b>unset</b> command. This is not the same as being set to null.</p>
<p>Unsetting either the base or nameref variable will unset both variables.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="7_Special_Parameters_155685234" id="7_Special_Parameters_155685234"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Verdana;">7 Special Parameters</span></span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="mgds" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_160d8q2vnf3_b" style="width:537px;height:285px;" /></div>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="7_1_The_Parameter_882457770205" id="7_1_The_Parameter_882457770205"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.1 The ? Parameter</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The ? parameter contains the exit status of the last executed command. In this example, the date command is executed. It ran successfully, so the exit status is 0:<br /><span style="font-family:'Courier New';">    $ date +%D</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    05/24/96</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $?</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    0</span><br />When used with a pipe, $? contains the exit status of the last command in the pipeline.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="7_2_The_Parameter_996378622698" id="7_2_The_Parameter_996378622698"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.2 The $ Parameter</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The $ parameter contains the process id of the current shell.<br /><span style="font-family:'Courier New';">    $ print $$</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    178</span></p>
<p>It is useful in creating unique file names within Korn shell scripts.<br /><span style="font-family:'Courier New';">    $ touch $0.$$</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ ls *.*</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ksh.218</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="7_3_Other_Special_Parameters_5" id="7_3_Other_Special_Parameters_5"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">7.3 Other Special Parameters</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>-</b> parameter contains the current options in effect. The output of the next command shows that the interactive and monitor options are enabled:<br /><span style="font-family:'Courier New';">    $ print $—</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    im</p>
<p></span>To display the error number of the last failed system call, use the <b>ERRNO</b> variable. Here, an attempt to display a non-existent file returns an error, so ERRNO is checked for the error number:<br /><span style="font-family:'Courier New';">    $ cat tmp.out</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    tmp.out: No such file or directory</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $ERRNO</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2<br /></span>This is system dependent, so it may not be available on your system. Check your documentation or /usr/include/sys/errno.h for more information.<br /></span></span><br />
<h2 style="font-size:14pt;"><a name="8_Variable_Expansion_888811139" id="8_Variable_Expansion_888811139"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8 Variable Expansion</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Variable expansion is the term used for the ability to access and manipulate values of variables and parameters. Basic expansion is done by preceding the variable or parameter name with the $ character. This provides access to the value.<br /><span style="font-family:'Courier New';">    $ UULIB=/usr/lib/uucp</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $UULIB</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lib/uucp</p>
<p></span>Other types of expansion can be used to return portions or the length of variables, use default or alternate values, check for mandatory setting, and more.</p>
<p>For the sake of convenience, the term <i>variable</i> will refer to both variables and parameters in the following sections that discuss variable expansion.
<div id="b4k6" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><a href="http://docs.google.com/File?id=dd6nw3mt_161fp2b4mfg_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_161fp2b4mfg_b" style="width:427px;height:711px;border-style:initial;border-color:initial;border-width:0;" /></a></div>
<p>
<div id="azy1" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_162fmx9j6d6_b" style="width:411px;height:465px;" /></div>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_1_variable_variable_01009047" id="8_1_variable_variable_01009047"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.1 $variable, ${variable}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable</u>. The braces are used to protect or delimit the variable name from any characters that follow. The next example illustrates why braces are used in variable expansion. The variable CA is set to ca:<br /><span style="font-family:'Courier New';">    $ CA=ca</p>
<p></span>What if we wanted to reset CA to california? It could be reset to the entire value, but to make a point, let's try using the current value like this:<br /><span style="font-family:'Courier New';">    $ CA=$CAlifornia</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $CA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</p>
<p></span>Nothing is printed, because without the braces around the variable CA, the Korn shell looks for a variable named $CAlifornia. None is found, so nothing is substituted. With the braces around variable CA, we get the correct value:<br /><span style="font-family:'Courier New';">    $ CA=${CA}lifornia</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $CA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    california</p>
<p></span>Braces are also needed when attempting to expand positional parameters greater than 9. This ensures that both digits are interpreted as the positional parameter name.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_2_variable_45711572132405753" id="8_2_variable_45711572132405753"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.2 ${#<i>variable</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the length of variable.</u> In this example, X is set to a three-character string, so a length of 3 is returned:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${#X}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    3</span><br />Whitespace in variable values is also counted as characters.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_3_variable_word_variable_wor" id="8_3_variable_word_variable_wor"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.3 ${<i>variable:-word</i>}, ${<i>variable-word</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable if it is set and <b>not null</b></u>, otherwise word is expanded. <b>This is used to provide a default value if a variable is not set.</b> In the following example, the variable X is set to abc. When expanded using this format, the default value abc is used:<br /><span style="font-family:'Courier New';">    $ X=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X:—cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br />After X is unset, the alternate value cde is used:<br /><span style="font-family:'Courier New';">    $ unset X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X:—cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    cde</span><br />Notice that the value of X remains unchanged:<br />$ print $X<br />$</p>
<p>Let's say we needed a command to get the user name. The problem is that some people have it set to USER, while others have it set to LOGNAME. We could use an if command to check one value first, then the other. This would be quite a few lines of code. Or we could use this form of variable expansion to have both values checked with one command. Here, if USER is set, then its value is displayed, otherwise the value of LOGNAME is displayed.<br /><span style="font-family:'Courier New';">    $ print USER=$USER, LOGNAME=$LOGNAME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    USER=anatole, LOGNAME=AO</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:—${LOGNAME}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    anatole</span><br />Now we unset USER to check and make sure that LOGNAME is used:<br /><span style="font-family:'Courier New';">    $ unset USER</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:—${LOGNAME}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    AO</span></p>
<p>But what if both USER and LOGNAME are not set? Another variable could be checked like this:<br /><span style="font-family:'Courier New';">    $ unset USER LOGNAME</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${USER:-${LOGNAME:-USER and LOGNAME not set!}}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    USER and LOGNAME not set!</span><br />Or<br />$ print ${USER—${LOGNAME:—$(whoami)}}<br />anatole</p>
<p><b>Remember that the alternate value is only used and not assigned to anything. </b>The other format, <u>${variable-word}, causes the variable value to be used, even if it is set to null:</u><br /><span style="font-family:'Courier New';">    $ typeset X=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X-cde}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_4_variable_word_variable_wor_12497100047767162" id="8_4_variable_word_variable_wor_12497100047767162"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.4 ${<i>variable</i><span style="font-family:Georgia;">:=</span><i>word</i>}, ${<i>variable</i><span style="font-family:Georgia;">=</span><i>word</i>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable <b>if set and not null</b>, otherwise it is set to word, then expande</u>d. In contrast to the variable expansion format from the previous section, this format is used to assign a default value if one is not already set. In the next example, the variable LBIN is set to /usr/lbin. When expanded using this format, the default value /usr/lbin is used:<br /><span style="font-family:'Courier New';">    $ LBIN=/usr/lbin</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${LBIN:=/usr/local/bin}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lbin</span></p>
<p>After LBIN is unset, this form of variable expansion causes LBIN to be assigned the alternate value, /usr/local/bin:<br />$ unset LBIN<br />$ print ${LBIN:=/usr/local/bin}<br />/usr/local/bin</p>
<p>Command substitution can also be used in place of <i>word</i>. This command sets the SYS variable using only one command:<br /><span style="font-family:'Courier New';">    $ unset SYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${SYS:=$(hostname)}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    aspd</span></p>
<p>The other format, <u><b>${<i><span style="font-family:Georgia;">variable=word</span></i>}</b>, <span style="color:rgb(255,0,0);">causes the variable value to be used, even if it is set to null</span></u>. Here LBIN is not assigned an alternate value. <span style="color:rgb(0,0,0);">If := was used instead of =, then LBIN would be set to /usr/local/bin:</span><br /><span style="font-family:'Courier New';">    $ LBIN=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${LBIN=/usr/local/bin}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_5_variable_word_variable_var_9760769000276923" id="8_5_variable_word_variable_var_9760769000276923"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.5 ${<i>variable</i><span style="font-family:Georgia;">:?</span><i>word</i>}, ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">:?</span>}; ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">?</span><i><span style="font-family:Georgia;">word</span></i>}, ${<i><span style="font-family:Georgia;">variable</span></i><span style="font-family:Georgia;">?</span>}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable <b>if it is set and not null</b>, otherwise word is printed and the Korn shell exits</u>. If word is omitted, "<b><span style="font-family:Georgia;">parameter null or not set</span></b>" is printed. This feature is often used in Korn shell scripts to check if mandatory variables are set. In this example, variable XBIN is first unset. When expanded, the default error is printed:<br /><span style="font-family:'Courier New';">    $ unset XBIN</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ : ${XBIN:?}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: XBIN: parameter null or not set</p>
<p></span>You could also provide your own error message:<br /><span style="font-family:'Courier New';">    $ print ${XBIN:?Oh my God, XBIN is not set!}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /bin/ksh: XBIN: Oh my God, XBIN is not set!</span></p>
<p>The other formats, <u><b>${variable?word}</b> and<b> ${variable?}</b>, cause the variable value to be used, even if it is set to null</u>.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_6_variable_word_variable_wor_5404786737635732" id="8_6_variable_word_variable_wor_5404786737635732"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.6 <span style="font-family:Georgia;">${<i>variable</i>:+<i>word </i>}, ${<i>variable</i>+<i>word</i> }</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of word if variable is set and not null, otherwise nothing is substituted.</u> This is basically the opposite of the <span style="font-family:Georgia;">${<i>variable</i>:-<i>word</i>}</span> format. Instead of using <i>word</i> if variable is not set, <i>word </i><span style="color:rgb(255,0,0);">is used if variable is set</span>. In the first example Y is set to abc. When expanded, the alternate value def is displayed because Y is set:<br /><span style="font-family:'Courier New';">    $ Y=abc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y:+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    def</p>
<p></span>Here, Y is unset. Now when expanded, nothing is displayed:<br /><span style="font-family:'Courier New';">    $ unset Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y:+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>Like the ${variable:-word} format, <span style="color:rgb(0,0,255);">the alternate value is only used and not assigned to the variable</span>. Y is still set to null:<br /><span style="font-family:'Courier New';">    $ print $Y</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>The other format, <u>${variable+word}, causes the variable value to be used, even if it is set to null</u>:<br /><span style="font-family:'Courier New';">    $ Y=</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${Y+def}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    def</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_7_variable_pattern_variable__9965686993673444" id="8_7_variable_pattern_variable__9965686993673444"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;">8.7 ${<i>variable</i>#<i>pattern</i>}, ${<i>variable</i>##<i>pattern</i>}</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable with the smallest (#) or largest (##) part of the left matched by <i><span style="font-family:Georgia;">pattern</span></i> deleted.</u> What these expansion formats allow you to do is manipulate substrings. To demonstrate the basic functionality, X is set to a string that contains a recurring pattern: abcabcabc.<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><br />When expanded to return the substring that deletes the smallest left pattern abc, we get abcabc:<br /><span style="font-family:'Courier New';">    $ print ${X#abc*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abcabc</span></p>
<p>while the substring that deletes the largest left pattern abc is abcabcabc, or the entire string:<br /><span style="font-family:'Courier New';">    $ print ${X##abc*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span></p>
<p>We could use this concept to implement the Korn shell version of the UNIX <b>basename</b> command. The pattern in this command causes the last directory to be returned if variable X is set to<span style="font-family:'Courier New';"> a full pathname:</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ X=/usr/spool/cron</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X##*/}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    cron</span><br style="font-family:'Courier New';" /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_8_variable_pattern_variable__9711597748100758" id="8_8_variable_pattern_variable__9711597748100758"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.8<span style="font-family:Georgia;"> ${<i>variable</i>%<i>pattern</i>}, ${<i>variable</i>%%<i>pattern</i>}</span></span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>This is expanded to the value of variable with the smallest (%) or largest (%%) part of the right matched by pattern deleted.</u> It could also be used to display file names without their .suffixes:<br /><span style="font-family:'Courier New';">    $ X=file.Z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X%.*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    file</span></p>
<p>The pattern in this command causes it to act like the UNIX dirname command. Everything except the last directory is returned if variable X is set to a full pathname.<br /><span style="font-family:'Courier New';">    $ X=/usr/spool/cron</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X%/*}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/spool</span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="8_9_variable_pattern1_pattern2_647486001253128" id="8_9_variable_pattern1_pattern2_647486001253128"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.9 ${variable//pattern1/pattern2}, </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable/pattern1/pattern2}; </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable#pattern1/pattern2},</span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">${variable/%pattern1/pattern2}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell supports four search and replace operations on variables. This example changes all occurrences of abc in X to xyz:<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X//abc/xyz}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    xyzxyzxyz</span><br />while this one only changes the first occurrence of abc in X to xyz:<br /><span style="font-family:'Courier New';">    $ X=abcabcabc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print ${X/abc/xyz}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    xyzabcabc</span><br />See Table 3.6 for detailed explanation of the other formats.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="8_10_variable_start_variable_s" id="8_10_variable_start_variable_s"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">8.10 ${variable:start}, ${variable:start:length}</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">This format returns a substring. The first returns variable from character position start to end, while the second returns length characters from variable from character position start to end. For example, this returns the first 3 characters of X:<br /><span style="font-family:'Courier New';">    $ X=abcdefghij</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print {$X:0:3}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    abc</span><br />while this example returns the value of X starting at character position 5:<br /><span style="font-family:'Courier New';">    $ X=abcdefghij</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print {$X:5}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    fghij</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="9_Array_Variables_111484066583_7120619406923652" id="9_Array_Variables_111484066583_7120619406923652"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9 Array Variables</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can have a maximum of 4096 elements. Array subscripts start at 0 and go up to 4096 (or the maximum element minus one). Any variable can become a one-dimensional array by simply referring to it with a subscript.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="9_1_Array_Variable_Assignments_8827508166432381" id="9_1_Array_Variable_Assignments_8827508166432381"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.1 Array Variable Assignments &amp; Declarations</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can be assigned values by using normal variable assignment statements, the <b><span style="font-family:Georgia;">set -A</span></b> command, or the <b>typeset</b> command:<br /><i>        variable[0]=value variable[1]=value . . . variable[n]=value</i><br />or<br /><span style="font-family:Georgia;"><b>        set -A </b><i>variable value0 value1 . . . valuen</i></span><br />or<br /><span style="font-family:Georgia;"><b>        typeset</b> <i>variable[0]=value variable[1]=value . . .  variable[n]=value</i></span></p>
<p>The only difference between the formats, is that with the set command format, the values are assigned to the array variable sequentially starting from element zero. In the other formats, the array elements can be assigned values in any order.</p>
<p>Not all the elements of an array need to exist. You can assign values to non-successive elements of an array.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_2_Array_Variable_Expansion_6_4298841701820493" id="9_2_Array_Variable_Expansion_6_4298841701820493"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.2 Array Variable Expansion</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="nazz" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_163hqbxwc94_b" style="width:525px;height:454px;" /></div>
<p></span></span></span></span><br /><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Array variables are expanded in the same manner as normal variables and parameters: using the $ character. Without a subscript value, an array variable refers to the first element, or element 0.</p>
<p>To access the value of a specific array variable element use a subscript. Array variable names and subscripts must be enclosed in braces for proper expansion:<br /><span style="font-family:'Courier New';">    $ print ${DAY[3]} ${DAY[5]}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Thu Sat</span></p>
<p>All the elements of an array can be accessed by using the * or @ as the subscript value. They both return the same value.</p>
<p>The number of elements of an array variable is returned by using the # in front of the array variable name and using * or @ as the subscript value.</p>
<p>To get values for a subset of an array, use this format:<br /><b><span style="font-family:Georgia;">        ${<i>variable</i>[*]:<i>start_subscript</i>:<i>num_elements</i>}</span></b><br />or<br /><b><span style="font-family:Georgia;">        ${<i>variable</i>[@]:<i>start_subscript</i>}</span></b></p>
<p>Arithmetic expressions can be used to return a subscript value. Variable expansion can also be used to generate a subscript value.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_3_Array_Variable_Attributes__8870758265256882" id="9_3_Array_Variable_Attributes__8870758265256882"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.3 Array Variable Attributes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Arrays can also be declared, and assigned values and attributes with the typeset command:<br /><span style="font-family:Georgia;"><b>                typeset</b></span><i><span style="font-family:Georgia;"> -attribute variable[0]=value variable[1]=value . . .</span></i><br />Once set, attributes apply to all elements of an array. This example sets the uppercase attribute for the DAY array variable using the <b>typeset -u</b> command:<br /><span style="font-family:'Courier New';">        $ typeset —u DAY</span><br />Now all the element values are displayed in upper case:<br /><span style="font-family:'Courier New';">        <b>$ print ${DAY[*]}</b> <b><span style="color:rgb(56,118,29);">#Pay attention to usage.</span></b></span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">        MON TUE WED THU FRI SAT SUN</span><br />Array element attributes can be set before or after assignment.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_4_Array_Variable_Reassignmen_9427135931327939" id="9_4_Array_Variable_Reassignmen_9427135931327939"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.4 Array Variable Reassignments</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Besides using regular <span style="font-family:Georgia;"><i>array-element</i>[n]=<i>value</i></span> or <span style="font-family:Georgia;"><b>typeset</b> <i>arrayelement</i>[n]=<i>value</i></span> syntax to reassign values, array variables can also have their values reassigned with the set +A command:<br /><span style="font-family:Georgia;"><b>set +A </b><i>variable value0 value1 . . .</i></span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="9_5_Associative_Arrays_1665451_4800594123080373" id="9_5_Associative_Arrays_1665451_4800594123080373"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">9.5 Associative Arrays</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Associative </span></span></span></span></u><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><u>arrays use string subscripts rather than integer subscripts.</u> Associative arrays are declared using this format:<br /><span style="font-family:Georgia;"><b>                typeset -A</b> <i>variable</i></span><br />where </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:Georgia;"><i>variable</i></span></span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"> is the name of the associative array. Additional arguments can be given to the <b>typeset </b>command to specify a data type. For example, we can create an associative array to store some exchange rates:<br /><span style="font-family:'Courier New';">    $ typeset -AE exchange_rate</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["DM"]=1.7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["FF"]=.15</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ exchange_rate["AS"]=.04</span></p>
<p>To display a list of associative array subscripts:<br /><span style="font-family:Georgia;">               <b> </b><b>${!<i>variable</i>[*]} </b> <span style="font-family:Verdana;">or</span>  <b>${!<i>variable</i>[@]}</b></span><br />To display the values for all or parts of an associative array:<br />        <b><span style="font-family:Georgia;">${!<i>variable</i>[<i>subscript</i>]}</span></b><br />For example, all and a specific exchange rate is displayed here:<br /><span style="font-family:'Courier New';">    $ print ${!exchange_rate[*]}</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    0.15 1.7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "The DM exchange rate is:${exchange_rate[DM]}"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    1.7</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="10_Compound_Variables_21190555_19111895095556974" id="10_Compound_Variables_21190555_19111895095556974"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">10 Compound Variables</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Compound Variables is a meta-datatype which is a group of related values. The syntax for declaring compund variables is:<br /><i><b><span style="font-family:Georgia;">    compound_variable</span></b></i><b><span style="font-family:Georgia;">=(</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">            </span></b></i><b><span style="font-family:Georgia;">[</span></b><i><b><span style="font-family:Georgia;">datatype</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><span style="font-family:Georgia;"> field1</span></b></i><b><span style="font-family:Georgia;">[=</span></b><i><b><span style="font-family:Georgia;">value</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">                . . .</span><br style="font-family:Georgia;" /><span style="font-family:Georgia;">           </span></b></i><b><span style="font-family:Georgia;"> [</span></b><i><b><span style="font-family:Georgia;">datatype</span></b></i><b><span style="font-family:Georgia;">] </span></b><i><b><span style="font-family:Georgia;">fieldn</span></b></i><b><span style="font-family:Georgia;">[=</span></b><i><b><span style="font-family:Georgia;">value</span></b></i><b><span style="font-family:Georgia;">]</span></b><i><b><br style="font-family:Georgia;" /><span style="font-family:Georgia;">            </span></b></i><b><span style="font-family:Georgia;">)</span></b></span></span></span></span><br style="font-family:Georgia;" /><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />The syntax to display the value of a compound variable field is:<br /><b>                ${<i>compound_variable.field</i>}</b></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="11_Quoting_12240633368492126_0" id="11_Quoting_12240633368492126_0"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11 Quoting</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">There are three types of quotes: <b>single quotes</b>, <b>double quotes</b>, and<b> back quotes</b>. Single and double quotes are similar, except for the way they handle some special characters. Back quotes are used for command output assignment.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_1_Single_Quotes_61755968164_7702147783711553" id="11_1_Single_Quotes_61755968164_7702147783711553"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.1 Single Quotes</span></span></h3>
<p>Single quotes are also used to hide the meaning of special characters like $, *, /, !, ", ` and /. Any characters between single quotes, except<span style="font-family:'Courier New';"><span style="font-family:Verdana;"> another single quote, are displayed without interpretation as special characters:<br /><span style="font-family:'Courier New';">    $ print '* $ / ! ` / "'</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    * $ / ! ` / "</span><br style="font-family:'Courier New';" /><br /><b>Variable and command substitution does not take place within single quotes</b> (because $ and `` lose their special meaning).<b> If you want to access the value of a variable, use double quotes instead of single quotes</b> (discussed in the next section).</p>
<p>Variables can be set to null with single quotes:<br /><span style="font-family:'Courier New';">    $ X=''</span><br />Single quotes are also used to assign values to aliases and trap commands, and prevent alias substitution, but we'll get to that later.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_2_Double_Quotes_24466882180_9458656702190638" id="11_2_Double_Quotes_24466882180_9458656702190638"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.2 Double Quotes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Double quotes are like single quotes, except that they do <b>not </b>remove the meaning of the special characters $, `, and /. This means that variable and command substitution is performed.<br /><span style="font-family:'Courier New';">    $ DB="$HOME:`pwd`"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $DB</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /home/anatole:/tmp</span></p>
<p>Double quotes also preserve embedded whitespace and newlines. Here are some examples:<br /><span style="font-family:'Courier New';">    $ print "Line 1</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; Line 2"   <span style="color:rgb(106,168,79);"> </span><span style="color:rgb(106,168,79);">#</span></span></span></span><span style="font-family:'Courier New';color:rgb(106,168,79);"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The &gt; is the secondary prompt, and is displayed whenever the Korn shell needs more input.</span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';color:rgb(106,168,79);"></span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Line 1</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Line 2</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "A        B"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    A        B</span></p>
<p>In this case, it waits for the closing double quote:<br /><span style="font-family:'Courier New';">    $ ADDR="ASP,Inc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; PO Box 23837</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; San Jose CA 95153 USA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    &gt; (800)777-UNIX * (510)531-5615"</span><br />Without double quotes around ADDR, we get this:<br /><span style="font-family:'Courier New';">    $ print $ADDR</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASP,Inc PO Box 23837 San Jose CA 95153 USA (800) 777-</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    UNIX * (510)531-5615</span><br />Not quite what we wanted. Let's try it again:<br /><span style="font-family:'Courier New';">    $ print "$ADDR"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    ASP,Inc</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    PO Box 23837</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    San Jose CA 95153 USA</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    (800)777-UNIX * (510)531-5615</span></p>
<p>There are also other uses for double quotes. You can set a variable to null:<br /><span style="font-family:'Courier New';">    $ NULL=""</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $NULL</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</span><br />or display single quotes.<br /><span style="font-family:'Courier New';">    $ print "'This is in single quotes'"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    'This is in single quotes'</span><br />If you really wanted to display the $, `, /, or " characters using double quotes, <b>escape them with a backslash</b> like this:<br /><span style="font-family:'Courier New';">    $ print "/$HOME is set to $HOME"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $HOME is set to /home/anatole</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print "/`=back-quote //=slash /"=double-quote"</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    `=back-quote /=slash "=double-quote</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="11_3_Back_Quotes_6698768856003_8325655767694116" id="11_3_Back_Quotes_6698768856003_8325655767694116"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">11.3 Back Quotes</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b><u>Back quotes are used to assign the output of a command to a variable.</u></b> This format, from the Bourne shell, is accepted by the Korn shell but considered obsolescent. This command sets the variable SYS to the system name:<br /><span style="font-family:'Courier New';">    $ SYS=`uuname —l`</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $SYS</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    aspd</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="12_Command_History_File_256358" id="12_Command_History_File_256358"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">12 Command History File</span></span></i></h2>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell stores the commands that you enter at your terminal in a file, called the command history file. This file is specified by the <b>HISTFILE</b> variable. If not set, the default is <b>$HOME/.sh_history</b>.</p>
<p>The number of commands accessible via the command history file is specified by the <b>HISTSIZE</b> variable. If not set, the last 128 commands are saved, starting from your most recent command.</p>
<p>There are two ways to access the command history file: using the <b>fc</b> command, or the in-line editor.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="13_The_fc_Command_071168033406" id="13_The_fc_Command_071168033406"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13 The fc Command</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The <b>fc</b> command allows you to list, or edit and re-execute history file commands. The fc command also allows you to manipulate the history file using your own choice of editors.<br /></span></span><br />
<h3 style="font-size:12pt;"><a name="13_1_Displaying_the_Command_Hi" id="13_1_Displaying_the_Command_Hi"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13.1 Displaying the Command History File</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The format for displaying the command history file with the <b>fc -l</b> command is:<br /><b>        fc -l[nr]</b> [ <i>range</i> ]<br />where the -n option causes the command numbers to not be  displayed, and the -r option specifies reverse order (latest commands first). The range of commands to list is given as:<br /><b>n1 [n2]:</b>     display list from command n1 to command n2. If n2 is not specified, display all the commands from current command back to command n1.<br /><b><i>-count:</i></b><b><i>    </i></b> display the last count commands string display all the previous commands back to the command that matches.<br /><b>string:</b><b>    </b> If no range argument is given, the last sixteen commands are listed.</p>
<p>If no <i>range </i>argument is given, the last sixteen commands are listed. Let's look at the last five commands:<br /><span style="font-family:'Courier New';">    $ fc -l -5</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    250 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    251 vi /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    252 . /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br />The <b>history</b> command is equivalent to <b>fc -l</b>. The last command could also be given like this. Notice that the order is reversed.<br /><span style="font-family:'Courier New';">    $ history —r —5</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    252 . /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    251 vi /etc/env</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    250 set</span><br />By using a string instead of a count argument, we could search backward for a specific command.<br /><span style="font-family:'Courier New';">    $ history —r set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    258 fc —lr set</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    257 fc —ln —10</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    256 fc —l 250 265</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    255 functions</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    254 alias</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    253 set</span><br />The argument set could also be given as s, or se, since partial strings are also matched. This means that the string f would match functions and fc, while fu would only match functions.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="13_2_Editing_the_Command_Histo_6460225936025381" id="13_2_Editing_the_Command_Histo_6460225936025381"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">13.2 Editing the Command History File</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Besides displaying the command history file, it can also be edited using the fc command with the following format:<br /><b><span style="font-family:Georgia;">                fc [-e <i>editor</i>] [-r] [<i>range</i>]</span></b><br />or<br /><b>                fc -e - [<i>old=new</i>] [<i>command</i>]</b><br />where the -e editor option is used to specify an editor. If not given, the value of the FCEDIT variable is used, and if not set, the default /bin/ed is used. The -r option reverses the order of the commands, so that the latest commands are displayed first.</p>
<p></span></span>Using <b>r</b>, the last command could also be given as: <span style="font-family:'Courier New';"><br />    $ <b>r</b> 173</p>
<p><span style="font-family:Verdana;">The substitution feature is used to make minor changes to </span><span style="font-family:Verdana;">a previous command. Let's start with <b>print Hello</b>:<br /><span style="font-family:'Courier New';">    $ print Hello</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Hello</span><br />We could change Hello to something else like this.<br /><span style="font-family:'Courier New';">    $ r Hello=Goodbye print</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    print Goodbye</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Goodbye</span></p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="14_Job_Control" id="14_Job_Control"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><i>14 Job Control</i></span></span></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Job control allows programs to be stopped and restarted, moved between the foreground and background, their processing status to be displayed, and more. To enable the job control feature, the monitor option must be enabled with the set command:<br /><b><span style="font-family:Georgia;">                $ set —o monitor</span></b><br style="font-family:Georgia;" /><span style="font-family:Verdana;">or</span><br style="font-family:Georgia;" /><b><span style="font-family:Georgia;">                $ set —m</span></b><br />This can be put into the <b>.profile</b> file so that job control is automatically enabled at login.</p>
<p>14.1 Manipulating Jobs<br />Jobs running in the foreground are suspended by typing <b>Ctl-z</b> (Control-z). So instead of waiting for the long-running <b>split</b> command to complete, it is interrupted using Ctl-z:<span style="font-family:'Courier New';"><br />    $ split —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Ctl-z</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [3] + Stoppedsplit —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $</p>
<p></span>Stopped and backgrounded jobs are brought back into the foreground with the <b>fg</b> command. If no argument is given, the current (most recently stopped or backgrounded) job is used. The stopped split job is brought back into the foreground with fg:<br /><span style="font-family:'Courier New';">    $ fg</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    split —5000 hugefile<br /><span style="font-family:Verdana;">or </span><br />    $ fg %3<br /></span><br />Stopped jobs are put into the background with the <b>bg </b>command.</p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="14_2_Checking_Job_Status" id="14_2_Checking_Job_Status"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">14.2 Checking Job Status</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The status and other information about all jobs is displayed using the <b>jobs</b> command. The <b>jobs -l</b> command shows the same information, along with the process ids, while <b><span style="font-family:Georgia;">jobs -p</span></b> only gives you the process ids.<br /><span style="font-family:'Courier New';">    $ jobs —l</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [3] + 466 Stopped split —5000 hugefile</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] — 465 Running find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [1] 463 Running sleep 25 &amp;</p>
<p></span>Stopped or background jobs are terminated with the <b>kill</b> command.</p>
<p>You can make the Korn shell wait for some or all background jobs to complete with the <b>wait</b> command. If no argument is given, the Korn shell waits for <u>all background jobs</u> to complete.<span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span><br style="font-family:Verdana;" /></span><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="14_3_Job_Control" id="14_3_Job_Control"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">14.3 Job Control</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="p4e8" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><a href="http://docs.google.com/File?id=dd6nw3mt_165hjfw2fdd_b" target="_blank"><img src="http://docs.google.com/File?id=dd6nw3mt_165hjfw2fdd_b" style="border-style:initial;border-color:initial;border-width:0;" /></a></div>
<p>Jobs being executed in the background are prevented from generating output by setting <b><span style="font-family:Georgia;">stty tostop</span></b>. Let's run the find job again with the <b>tostop</b> option enabled:<br /><span style="font-family:'Courier New';">    $ stty tostop</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] 1460<br /><span style="font-family:Verdana;">The <b><span style="font-family:Georgia;">stty tostop</span></b> command can be put into your profile file so that </span><span style="font-family:Verdana;">background job output is by default disabled.</span></span></span></span></span></span><br /><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br />The <b><span style="font-family:Georgia;">nohup </span></b>command can also be used to direct output from background jobs. It causes standard output and standard error to be automatically sent to <b>nohup.out</b>, or whatever file you give it. One added benefit. The <b>nohup</b> command will keep jobs running, even if you log out. Here we run the <b>find</b> job again using <b>nohup</b>. First we need to enable background job output:<br /><span style="font-family:'Courier New';">    $ stty —tostop</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ nohup find / —name core —print &amp;</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] 1469</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ wait</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    Sending output to 'nohup.out'</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    [2] + Done nohup find / —name core —print &amp;</span><br />The find job output is in <b>nohup.out</b>:<br /><span style="font-family:'Courier New';">    $ cat nohup.out</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /usr/lbin/core</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    /home/anatole/bin/core</span></p>
<p>14.4 Job Names
<div id="y2h2" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_166cds9fbf2_b" style="width:431px;height:185px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h2 style="font-size:14pt;"><a name="15_Performing_Arithmetic" id="15_Performing_Arithmetic"></a><i>15 Performing Arithmetic</i></h2>
<p>All of the operators from the C programming language (except ++, --, and ?:) are now supported by the Korn shell.</div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="15_1_The_let_Command" id="15_1_The_let_Command"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.1 The let Command</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">Integer arithmetic can be done with the let command and arithmetic expressions. The format for the let command is:<br /><span style="font-family:Georgia;"><b>                let</b>  "<i>arithmetic-expression</i>"</span><br />where arithmetic-expressions can contain constants, operators, and Korn shell variables. <b>Double quotes</b> are used with arithmetic expressions that contain white space or operators that have special meaning to the Korn shell.</p>
<p>Notice that in arithmetic expressions, regular variables can be referenced by name only, and do not have to be preceded by $ for substitution to be performed. Both<br /><span style="font-family:'Courier New';">    $ let "X=X + 1"</span><br />and<br /><span style="font-family:'Courier New';">    $ let "X=$X + 1"</span><br />are equivalent. The first format is preferred because parameter expansion does not have to be performed.
<div id="dspu" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_167gmh78ndp_b" style="width:431px;height:592px;" /></p>
</div>
<p></span></span>
<div style="text-align:left;margin-top:0;margin-bottom:0;">
<h3 style="font-size:12pt;"><a name="15_2_The_Command" id="15_2_The_Command"></a>15.2 The ((...)) Command</h3>
<p>The ((...)) command is equivalent to the let command, except that all characters between the (( and )) are treated as quoted arithmetic expressions. This is more convenient to use than let, because many of the arithmetic operators have special meaning to the Korn shell. The following commands are equivalent:<br /><span style="font-family:'Courier New';">    $ let "X=X + 1"</span><br style="font-family:'Courier New';" /><span style="font-family:Verdana;">and</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ ((X=X + 1))</span></div>
<p><span style="font-family:'Courier New';"></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><br /></span></span><br />
<h3 style="font-size:12pt;"><a name="15_3_Declaring_Integer_Variabl" id="15_3_Declaring_Integer_Variabl"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.3 Declaring Integer Variables</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">As with ordinary variables, integer variables need not be declared. A variable can simply be given an integer value, and then used in an arithmetic expression. However, variables can be explicitly declared integer type by using the <b>typeset -i</b> command. There is also another command called <b>integer</b>, which is equivalent to <b>typeset -i</b>.</p>
<p>Arithmetic can be performed directly on integer variables without using the let or ((...)) commands, as long as the integer value is being assigned a value. In other words, you can do this:<br /><span style="font-family:'Courier New';">    $ integer DAYS="4 + 3"</span><br />instead of<br /><span style="font-family:'Courier New';">    $ ((DAYS=4 + 3))</span><br />or<br /><span style="font-family:'Courier New';">    $ let "DAYS=4 + 3"</span></p>
<p></span></span><br />
<h3 style="font-size:12pt;"><a name="15_4_Arithmetic_Constants" id="15_4_Arithmetic_Constants"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.4 Arithmetic Constants</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The format for arithmetic constants is:<br /><i><span style="font-family:Georgia;">   <b> </b><b>    number</b></span></i><br />or<br /><i><span style="font-family:Georgia;">    <b>    base#number</b></span></i><br />where <u>base is a whole number between 2 and 36, and number is any non-negative integer</u>. If not specified, the default base is 10. The arithmetic base of a variable can be set with the <b>typeset -i</b><i><span style="font-family:Georgia;"><b>n</b> </span></i>command, or by prepending base# to the value. In this example, variable X is set to 5 in base 2 using both formats:<br /><span style="font-family:'Courier New';">    $ typeset —i2 X=5</span><br />or<br /><span style="font-family:'Courier New';">    $ typeset —i X=2#101     <span style="color:rgb(56,118,29);">#Note here 101 denotes 5 in decimal. </span></span></p>
<p>If you want to display the value of X in another base, just reset the base with the </span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"><b>typeset -i</b><i><span style="font-family:Georgia;"><b>n</b> </span></i></span></span></span></span><span style="font-family:'Courier New';"><span style="font-family:Verdana;">command. Here it is reset to base 3:<br /><span style="font-family:'Courier New';">    $ typeset —i3 X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $X</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    3#12</p>
<p></span></span></span><br />
<h3 style="font-size:12pt;"><a name="15_5_Random_Numbers" id="15_5_Random_Numbers"></a><span style="font-family:'Courier New';"><span style="font-family:Verdana;">15.5 Random Numbers</span></span></h3>
<h3 style="font-size:12pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h3>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">The Korn shell provides a special variable, <b>RANDOM</b>, which is used to generate random numbers in the range from 0 to 32767.</p>
<p>You can also initialize a sequence of random numbers by setting <b>RANDOM</b> to a value. Here, <b>RANDOM</b> is set to 7. When subsequently accessed, the values 2726 and 18923 are returned:<br /><span style="font-family:'Courier New';">    $ RANDOM=7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2726</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    18923</span><br />When RANDOM is reset to 7 again, the same numbers are returned:<br /><span style="font-family:'Courier New';">    $ RANDOM=7</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    2726</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    $ print $RANDOM</span><br style="font-family:'Courier New';" /><span style="font-family:'Courier New';">    18923</span><br />If RANDOM is unset, the special meaning is removed, even if reset.</p>
<p></span></span><br />
<h2 style="font-size:14pt;"><a name="16_The_Environment" id="16_The_Environment"></a><i><span style="font-family:'Courier New';"><span style="font-family:Verdana;">16 The Environment</span></span></i></h2>
<h2 style="font-size:14pt;"><span style="font-family:'Courier New';"><span style="font-family:Verdana;"></span></span></h2>
<p><span style="font-family:'Courier New';"><span style="font-family:Verdana;">
<div id="i4_8" style="text-align:center;margin-top:0;margin-bottom:0;padding:1em 0;"><img src="http://docs.google.com/File?id=dd6nw3mt_168dd38bmfm_b" style="width:472px;height:714px;" /></div>
<p></span></span></div>
<p></span></p>

      </div>
    </div>

    <div class="main-container shadow">
      <div class="mainbody">
        <div class="bshare-custom">
	<span class='st_facebook_large' displayText='Facebook'></span>
	<span class='st_googleplus_large' displayText='Google +'></span>
	<span class='st_twitter_large' displayText='Tweet'></span>
	<span class='st_sina_large' displayText='Sina'></span>
	<span class='st_linkedin_large' displayText='LinkedIn'></span>
	<span class='st_tumblr_large' displayText='Tumblr'></span>
	<span class='st_sharethis_large' displayText='ShareThis'></span>
	<span class='st_blogger_large' displayText='Blogger'></span>
	<span class='st_email_large' displayText='Email'></span>
</div>
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "6e9cb968-ad78-4055-b1e7-1b7ab6751416", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

        
        <div class="post-end">
</div>


        <div class="pagination">
          <ul>
          
            <li class="prev"><a href="/2008/11/24/kshell-note-2" title="Korn Shell Notes(II)">&larr; Previous</a></li>
          
            <li><a href="/archive.html">Archive</a></li>
          
            <li class="next"><a href="/2008/11/30/kshell-note-4" title="Korn Shell Notes(IV)">Next &rarr;</a></li>
          
          </ul>
        </div>
      </div>
    </div>

    <div class="main-container shadow">
      <div class="mainbody">
		


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'boyang'; // required: replace example with your forum shortname
     var disqus_identifier = '/2008/11/26/kshell-note-3';
    var disqus_url = 'http://bo-yang.github.com//2008/11/26/kshell-note-3';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




	  </div>
    </div>

  </div>

  <div class="span3 right">
    <div class="side-container shadow">
      <div class="sidebar">
        <h4>Published</h4>
        <div class="date"><span>2008-11-26</span></div>
      </div>
    </div>

    <div class="side-container shadow">
      <div class="sidebar">
        
          <h4>Tags</h4>
          <ul class="tag_box">
          
          


  
     
    	<li><a href="/tags.html#Shell-ref">Shell <span>12</span></a></li>
     
    	<li><a href="/tags.html#Unix/Linux-ref">Unix/Linux <span>93</span></a></li>
    
  



          </ul>
        
      </div>
    </div>

	
    <div class="side-container shadow">
		<div class="sidebar">
			<!--
			<script>
var linkwithin_site_id = 2140443;
</script>
<script src="http://www.linkwithin.com/widget.js"></script>
<a href="http://www.linkwithin.com/"><img src="http://www.linkwithin.com/pixel.png" alt="Related Posts Plugin for WordPress, Blogger..." style="border: 0" /></a>

			-->
			<h4>Related Posts</h4>
			
  				<li><a href="/2014/06/20/coin-change">Coin Change Problem</a></li>
			
  				<li><a href="/2014/06/18/text-justification">Text Justification</a></li>
			
  				<li><a href="/2014/06/17/sort-colors">Sort Colors</a></li>
			
  				<li><a href="/2014/06/14/soduku">Check Soduku Solution</a></li>
			
  				<li><a href="/2014/06/12/lru-cache">Least Recently Used(LRU) Cache</a></li>
			
  				<li><a href="/2014/05/26/binary-tree-traversal">Binary Tree Operations</a></li>
			
      </div>
  </div>
  	

  	<div class="side-container shadow">
		<div class="sidebar">
			<h4>Recent Posts</h4>
			
  				<li><a href="/2014/06/20/coin-change">Coin Change Problem</a></li>
  			
  				<li><a href="/2014/06/18/text-justification">Text Justification</a></li>
  			
  				<li><a href="/2014/06/17/sort-colors">Sort Colors</a></li>
  			
  				<li><a href="/2014/06/14/soduku">Check Soduku Solution</a></li>
  			
  				<li><a href="/2014/06/12/lru-cache">Least Recently Used(LRU) Cache</a></li>
  			
  				<li><a href="/2014/05/26/binary-tree-traversal">Binary Tree Operations</a></li>
  			
  				<li><a href="/2014/04/30/fisher-vector-in-action-recognition">Action Recognition with Fisher Vectors</a></li>
  			
  				<li><a href="/2014/03/29/how-to-install-jekyll-in-mac-osx-mavericks">How To Install Jekyll in Mac OSX Mavericks</a></li>
  			
  				<li><a href="/2014/03/26/c-code-to-print-pascal-triangle">C++ Code to Print Pascal Triangle</a></li>
  			
  				<li><a href="/2014/01/22/baci-simple-install-and-compile-guide">BACI Simple Install and Compile Guide</a></li>
  			
      </div>
    </div>


  </div>
</div>




    </div>

    <footer>
        <p>&copy; 2007 <span id="now_year"></span> Bo Yang. </p>
        <script type="text/javascript">
          var now_year = new Date().getFullYear();
          if (now_year != 2007) {
              $('#now_year').html('- ' + now_year);
          }
	    </script>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      </footer>
  </div>

  <script type="text/javascript" src="/assets/themes/clear/google-code-prettify/prettify.js"></script>
  <script type="text/javascript">
    $(function() {

      $('a[href^="http"]').each(function () {
        $(this).attr('target', '_blank');
      });

      $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto');
      window.prettyPrint && prettyPrint();

      function traverse($node, len, maxCount) {
        var reachMaxCount = len > maxCount;
        if (reachMaxCount) {
          $node.hide();
        }
        var $contents = $node.contents();
        for (var i = 0; i < $contents.length; ++i) {
          if (reachMaxCount) {
            $contents.eq(i).hide();
            continue;
          }
          if ($contents[i].nodeType == 3) { // TextNode
            var tmp = len;
            var s = $contents[i].nodeValue;
            len += s.length;
            reachMaxCount = len > maxCount;
            if (reachMaxCount && $contents[i].parentNode.nodeName != 'A') {
              $contents[i].nodeValue = s.substring(0, maxCount - tmp);
            }
          }
          else if ($contents[i].nodeType == 1) { // Element
            len = traverse($contents.eq(i), len, maxCount);
          }
        }
        return len;
      }

      $('.post_at_index').each(function() {
        var count = traverse($(this), 0, 400);
        if (count > 400) {
          var thisUrl = $(this).siblings().first().children().attr('href');
          $(this).after('\n<a href="' + thisUrl + '" rel="nofollow">' + 'Read More ...</a>');
        }
      });
    });
  </script>
  

</body>
</html>

